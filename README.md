# Dialogflow Chatbots: Telegram & VK

Проект включает **Telegram-** и **VK-ботов**, использующих **Dialogflow** для обработки и генерации ответов на сообщения пользователей.

**Dialogflow** — это облачный сервис от Google для создания чат-ботов, который использует технологии обработки естественного языка для генерации умных ответов на сообщения пользователей. Он позволяет строить ботов, которые могут понимать текстовые запросы и давать осмысленные ответы.

### Примеры работающих ботов:
**Telegram-бот:** Перейдите по ссылке, чтобы увидеть пример работы [Telegram-бота](https://t.me/game_0f_verbs_bot).

![ScreenRecording_04-06-2025 22-01-37_1](https://github.com/user-attachments/assets/8584bc0f-10ae-4e2f-9bff-b8ef14d421d8)

**VK-бот:** Заходите в [группу в ВКонтакте](https://vk.com/club229560473) и напишите сообщение в чат, чтобы увидеть, как бот работает.

![ScreenRecording_04-06-2025 22-07-53_1](https://github.com/user-attachments/assets/2d8cee80-d51d-480f-8ef0-8cb7d483253a)

## Установка и настройка


### 1. Скачайте или клонируйте репозиторий:

```shell
git clone https://github.com/yelena0000/DialogFlow.git
```

### 2. Установите зависимости:

```shell
pip install -r requirements.txt
```

### 3. Настройте переменные окружения:

Создайте файл `.env` в корневой папке вашего проекта и добавьте в него следующие переменные:


```
TG_BOT_TOKEN=ваш_токен_телеграм_бота
VK_GROUP_TOKEN=ваш_токен_группы_вк
DIALOGFLOW_PROJECT_ID=ваш_id_проекта_dialogflow
TG_CHAT_ID=ваш_чат_айди_для_получения_ошибок
GOOGLE_APPLICATION_CREDENTIALS=путь_к_файлу_учётных_данных
```
`TG_BOT_TOKEN` — токен **Telegram-бота**, созданного через [BotFather](https://telegram.me/BotFather). Сохраните и укажите его здесь.

`VK_GROUP_TOKEN` — токен доступа группы ВКонтакте. Получается через раздел **"Работа с API"** в настройках группы (разрешите доступ к сообщениям).

`DIALOGFLOW_PROJECT_ID` — ID проекта Dialogflow. Найти его можно в **Google Cloud Console**.

`TG_CHAT_ID` — ID чата в Telegram, куда будут отправляться сообщения об ошибках, если что-то пойдёт не так с ботами.

`GOOGLE_APPLICATION_CREDENTIALS` — путь к JSON-файлу с учётными данными сервисного аккаунта Google. Этот файл нужен для авторизации при работе с Dialogflow API.
Получить его можно в разделе IAM → Сервисные аккаунты в Google Cloud Console. При создании ключа выберите формат JSON.

## Запуск бота
### Для запуска Telegram-бота выполните команду:
```shell
python telegram_bot.py
```
Бот отвечает на текстовые сообщения, используя Dialogflow.
### Для запуска VK-бота выполните команду:
```shell
python vk_bot.py
```
Бот обрабатывает входящие сообщения в группе ВКонтакте и отвечает, используя Dialogflow, при наличии понятного интента.

## Обучение Dialogflow.
Скрипт `train_dialogflow.py` загружает фразы и ответы из файла `questions.json` и создаёт соответствующие интенты в вашем проекте **Dialogflow**.

#### 1. Подготовьте файл `questions.json`. Пример содержимого:

```json
{
  "faq": [
    {
      "category": "Категория",
      "questions": ["Вопрос 1", "Вопрос 2"],
      "answer": "Ответ"
    }
  ]
}
```
#### 2. Запустите обучение

Убедитесь, что у вас настроены переменные окружения (в частности `DIALOGFLOW_PROJECT_ID`), затем выполните:

```shell
python train_dialogflow.py
```
После запуска в вашей консоли появятся сообщения об успешно созданных интентах.
